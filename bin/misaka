#! /usr/bin/env node

var facter = require("../utils/facter");
var Logger = require("../utils/logger");

facter.query("fqdn", function(err, facts) {
    if (err) {
        Logger.error("fail to get fqdn. [err:%s]", err);
        process.exit(1);
        return;
    }

    // 如果外部指定了 fqdn 则直接使用指定值，这可以方便本地开多个 misaka 进行测试。
    var fqdn = process.env.MISAKA_FQDN || facts.fqdn;
    require("../app").start(fqdn);
});
